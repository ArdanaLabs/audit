% !TEX TS-program = xelatex
% !TEX encoding = UTF-8 Unicode

% -----------------
% START OF PREAMBLE
% -----------------
\documentclass[12pt,a4paper]{scrreprt}


% Commands
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}


% Packages
\usepackage{fontspec}
\usepackage{eurosym}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{mathtools}
\usepackage{upquote}
\usepackage{microtype}
\usepackage{polyglossia}
\usepackage{longtable,booktabs}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage[normalem]{ulem}
\usepackage[setpagesize=false,
            unicode=false,
            colorlinks=true,  % default was =false
            linkcolor=blue,
            urlcolor=blue]{hyperref}
\usepackage{datetime}
% \usepackage[backend=biber,style=authoryear]{biblatex}
% \bibliography{src/biblio}
% \addbibresource{./biblio.bib}
% \usepackage{biber}


\newtheorem{definition}{Definition}[section]
\newtheorem{derivation}{Derivation}[section]
\newtheorem{belief}{Belief}[section]

\makeatletter
\@ifpackageloaded{hyperref}%
  {\newcommand{\mylabel}[2]% #1=name, #2 = contents
    {\protected@write\@auxout{}{\string\newlabel{#1}{{#2}{\thepage}%
      {\@currentlabelname}{\@currentHref}{}}}}}%
  {\newcommand{\mylabel}[2]% #1=name, #2 = contents
    {\protected@write\@auxout{}{\string\newlabel{#1}{{#2}{\thepage}}}}}
\makeatother



\setmainlanguage{english}
\addto\captionsenglish{%
  \renewcommand{\contentsname}{Table of Contents}
}

% Required for syntax highlighting
$highlighting-macros$


% Don't let images overflow the page
% Can still explicit set width/height/options for an image
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}


% Make links footnotes instead of hotlinks
\renewcommand{\href}[2]{#2\footnote{\url{#1}}}


% Avoid problems with \sout in headers with hyperref:
\pdfstringdefDisableCommands{\renewcommand{\sout}{}}


% No paragraph indentation
% and set space between paragraphs
\setlength{\parindent}{0pt}
\setlength{\parskip}{1em plus 2pt minus 1pt}
\setlength{\emergencystretch}{3em} % Prevent overfull lines

% adaptation to the upgrade of Pandoc, otherwise error would occur.
$if(csl-refs)$
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newenvironment{CSLReferences}%
  {$if(csl-hanging-indent)$\setlength{\parindent}{0pt}%
  \everypar{\setlength{\hangindent}{\cslhangindent}}\ignorespaces$endif$}%
  {\par}
$endif$
\newenvironment{CSLLeftMargin}
\newenvironment{CSLRightInline}

% -----------------
%  END OF PREAMBLE
% -----------------
\begin{document}

\renewcommand{\thechapter}{\Roman{chapter}}

\input{src/cover}

% Chapter: 0, section: 1, subsection: 2 etc
\setcounter{secnumdepth}{5}
\setcounter{tocdepth}{2}
\tableofcontents

$body$

% \printbibliography

\appendix

\end{document}
